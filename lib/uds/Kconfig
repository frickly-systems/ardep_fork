# Copyright (C) Frickly Systems GmbH
# Copyright (C) MBition GmbH
#
# SPDX-License-Identifier: Apache-2.0

menuconfig UDS
    bool "UDS"
    select ISO14229
    imply REBOOT

if UDS 

    module = UDS
    module-str = UDS
    source "subsys/logging/Kconfig.template.log_config"

    config UDS_USE_DYNAMIC_REGISTRATION
        bool "Allow registering new event handlers at runtime"
        default n

    menuconfig UDS_UPLOAD_DOWNLOAD_MODULE
        bool "module to allow uploading and downloading of big chunks for data"
        select FLASH
        select FLASH_MAP
        default y

    if UDS_UPLOAD_DOWNLOAD_MODULE

        config UDS_FILE_TRANSFER
            bool "feature of upload download moduel that allows file transfer"
            depends on UDS_UPLOAD_DOWNLOAD_MODULE
            depends on FILE_SYSTEM
            default y

    endif # UDS_UPLOAD_DOWNLOAD_MODULE

    menuconfig UDS_USE_LINK_CONTROL
        bool "Enable LinkControl service (0x87)"
        default n
        help
          Enable support for the LinkControl service (0x87). This service allows
          switching the CAN bitrate at runtime.
          
    if UDS_USE_LINK_CONTROL

        config UDS_DEFAULT_CAN_BITRATE
            int "Default CAN bitrate"
            default 500000
            help
              Default CAN bitrate for UDS communication. When using the LinkControl
              function and the can interface gets reset to its default bitrate,
              this value is used.
    
    endif # UDS_USE_LINK_CONTROL
endif # UDS
