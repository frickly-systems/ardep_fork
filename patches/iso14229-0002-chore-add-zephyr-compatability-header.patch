From 4b9ad9a4cc674b4787e979c4450bc8bc4b1a4860 Mon Sep 17 00:00:00 2001
From: Tim <tim.schrader@frickly.systems>
Date: Thu, 28 Aug 2025 09:47:26 +0200
Subject: [PATCH] chore: add zephyr compatability header

---
 iso14229.h        |  2 ++
 iso14229_zephyr.h | 21 +++++++++++++++++++++
 2 files changed, 23 insertions(+)
 create mode 100644 iso14229_zephyr.h

diff --git a/iso14229.h b/iso14229.h
index 3ce263f..2b0de39 100755
--- a/iso14229.h
+++ b/iso14229.h
@@ -42,6 +42,8 @@ extern "C" {
 
 
 #if UDS_SYS == UDS_SYS_ARDUINO
+    
+#include "iso14229_zephyr.h"
 
 #include <assert.h>
 #include <stddef.h>
diff --git a/iso14229_zephyr.h b/iso14229_zephyr.h
new file mode 100644
index 0000000..51b500b
--- /dev/null
+++ b/iso14229_zephyr.h
@@ -0,0 +1,21 @@
+#pragma once
+
+#ifdef __ZEPHYR__
+
+#include <zephyr/sys/util.h>
+#include <zephyr/types.h>
+
+#ifndef static_assert
+#define static_assert(cond, msg) BUILD_ASSERT((cond), msg)
+#endif // static_assert
+
+#else
+
+#include <assert.h>
+#include <sys/types.h>
+
+#if !defined(static_assert) && defined(__GNUC__)
+#define static_assert(cond, msg) _Static_assert((cond), msg)
+#endif // !defined(static_assert) && defined(__GNUC__)
+
+#endif // __ZEPHYR__
\ No newline at end of file
-- 
2.43.0

